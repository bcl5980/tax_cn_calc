# 中国广义税率计算器

一个功能全面的中国税收计算工具，支持社保、公积金、个人所得税计算，以及年终奖优化和最低工资保障功能。

## 🌟 主要功能

### 1. 税率计算
- **三大核心税率指标**：
  - 个人税后/个人税前：传统的个人所得税率
  - (个人税后+公积金)/公司总成本：考虑公积金的实际收益率
  - 个人税后/公司总成本：公司视角的人力成本效率
- **详细计算项目**：
  - 社保公积金基数计算（60%-300%限制）
  - 公司社保总成本
  - 个人社保扣除
  - 个人所得税（七级超额累进税率）
  - 最低工资保障补贴

### 2. 年终奖优化
- 自动计算最优年终奖金额
- 最小化公司总成本
- 考虑年终奖单独计税政策
- 提供优化前后对比分析

### 3. 城市参数预设
- **北京**：社保基数11,761元，最低工资2,540元
- **上海**：社保基数12,307元，最低工资2,740元
- 支持自定义参数配置

### 4. 图表分析
- 税率变化趋势图
- 统计分析功能：
  - 最高税率及对应年薪
  - 最低税率及对应年薪
  - 税率差异分析
- 交互式工具提示

### 5. 最低工资保障
- 自动计算最低工资补贴
- 确保员工到手工资不低于当地最低工资标准
- 补贴成本计入公司总成本

## 🛠️ 技术栈

- **后端**：Flask (Python)
- **前端**：HTML5, CSS3, JavaScript (ES6+)
- **图表库**：Chart.js
- **样式**：响应式设计，支持移动端

## 📦 安装与运行

### 环境要求
- Python 3.7+
- Flask 2.0+

### 安装步骤

1. **克隆项目**
```bash
git clone <repository-url>
cd tax_cn_calc
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **运行应用**
```bash
python app.py
```

4. **访问应用**
```
http://localhost:5000
```

## 📁 项目结构

```
tax_cn_calc/
├── app.py                 # Flask主应用
├── requirements.txt       # Python依赖
├── README.md             # 项目说明
├── 设计说明.md           # 设计文档
└── templates/
    └── index.html        # 前端页面
```

## 🧮 计算逻辑

### 社保公积金计算
- 月度基数 = min(max(月薪, 社保基数×60%), 社保基数×300%)
- 公司缴费 = 月度基数 × (养老16% + 医疗9.8% + 失业0.5% + 工伤0.2% + 公积金5-12%)
- 个人缴费 = 月度基数 × (养老8% + 医疗2% + 失业0.5% + 公积金5-12%)

### 个人所得税计算
采用七级超额累进税率：
- 0-36,000元：3%
- 36,000-144,000元：10%
- 144,000-300,000元：20%
- 300,000-420,000元：25%
- 420,000-660,000元：30%
- 660,000-960,000元：35%
- 960,000元以上：45%

### 年终奖税收
- 支持年终奖单独计税方式
- 自动优化年终奖金额以最小化总税负
- 考虑月薪与年终奖的最优分配

### 最低工资保障
```
if 月度到手工资 < 最低工资标准:
    补贴 = 最低工资标准 - 月度到手工资
    公司总成本 += 补贴 × 12
```

## 🎯 使用方法

### 基础计算
1. 选择城市或自定义参数
2. 输入年薪和社保基数
3. 调整社保公积金比例
4. 点击"计算税率"

### 年终奖优化
1. 配置基础参数
2. 点击"年终优化"
3. 查看最优年终奖方案

### 图表分析
1. 切换到"税率图表"标签
2. 设置年薪范围和步进
3. 点击"生成图表"
4. 查看统计分析结果

## 📊 输出说明

### 关键税率指标
- **个人税后/个人税前**：个人视角的税负率
- **(税后+公积金)/总成本**：考虑公积金的实际收益率
- **税后/总成本**：公司视角的人力成本效率

### 详细计算数据
- 月度基数：社保公积金缴费基数
- 公司社保总成本：公司承担的社保公积金
- 个人社保扣除：个人承担的社保公积金
- 基础税后收入：扣除社保和个税后的收入
- 最低工资补贴：公司额外支付的保障金额
- 最终税后收入：包含最低工资保障的实际收入

## 🔧 配置参数

### 城市参数结构
```python
CITY_PARAMS = {
    '城市名': {
        'base_amount': 社保基数,
        'min_wage': 最低工资,
        'company_pension': 公司养老保险比例,
        'company_medical': 公司医疗保险比例,
        'company_unemployment': 公司失业保险比例,
        'company_injury': 公司工伤保险比例,
        'company_housing_fund': 公司公积金比例,
        'personal_pension': 个人养老保险比例,
        'personal_medical': 个人医疗保险比例,
        'personal_unemployment': 个人失业保险比例,
        'personal_housing_fund': 个人公积金比例
    }
}
```

## 🚀 特性亮点

1. **实时计算**：所有参数调整后实时计算结果
2. **响应式设计**：支持桌面和移动设备
3. **数据可视化**：直观的图表展示税率变化趋势
4. **智能优化**：自动寻找最优年终奖配置
5. **统计分析**：自动计算税率极值和对应收入水平
6. **最低工资保障**：符合劳动法规定的工资保障机制

## 🤝 贡献指南

欢迎提交问题和改进建议！

1. Fork 项目
2. 创建特性分支
3. 提交变更
4. 推送到分支
5. 创建 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 Issue
- 发送邮件

---

**注意**：本工具仅供参考，实际税务计算请以当地税务部门规定为准。
